---
layout: post
title:  第十五期
---

从[reddit](https://www.reddit.com/r/cpp/)/[hackernews](https://news.ycombinator.com/)/[lobsters](https://lobste.rs/)/[meetingcpp](https://www.meetingcpp.com/blog/blogroll/)摘抄一些c++动态。

每周更新

周刊项目地址 [github](https://github.com/wanghenshui/cppweeklynews)，[在线地址](https://wanghenshui.github.io/cppweeklynews/) | [discord讨论群组](https://discord.gg/cZ9mXVPGx6) ｜[飞书讨论群组](https://applink.feishu.cn/TeeBWN1D)｜[知乎专栏](https://www.zhihu.com/column/jieyaren)

欢迎投稿，推荐或自荐文章/软件/资源等，请[提交 issue](https://github.com/wanghenshui/cppweeklynews/issues)

---

## 资讯

###  编译器信息最新动态推荐关注hellogcc公众号

[本周周报github直达](https://github.com/hellogcc/osdt-weekly/blob/master/weekly/2021-05-26.md)

`TODO fix link then remove this line`

## 文章

- [c++ tip of week 227 **Did you know that `std::variant` become valueless by exception?**](https://github.com/QuantlabFinancial/cpp_tip_of_the_week/blob/master/227.md)

`TODO fix link then remove this line`

- [Compile-time pre-calculations in C++](https://blog.farnasirim.com/2021/05/compile-time-pre-calculations-in-c.html)

得益于constexpr/consteval 可以编译时求质数。给了两种求质数的方法

一种常规

```c++
// \file compile-time-cpp/is-prime-17-constexpr-func.cc
#include <iostream>
  
constexpr bool is_prime(int v) {
  for (int i = 2; i < v; i++) {
    if (v % i == 0) {
      return false;
    }
  }
  return true;
}
  
template<int v>
struct IsPrime {
  static constexpr bool value = is_prime(v);
};
  
int main() {
  std::cout << 7 << " : " << IsPrime<7>::value << std::endl;
  std::cout << 2000 << " : " << IsPrime<2000>::value << std::endl;
  std::cout << 2003 << " : " << IsPrime<2003>::value << std::endl;
  
  return 0;
}
```

一种是生成一个数组

```c++
#include <iostream>
#include <array>
  
template<int v>
consteval std::array<int, v + 1> sieve() {
  std::array<int, v + 1> arr = {};
  for(long long i = 2; i <= v; i++) {
    if(arr[i]) {
      continue;
    }
    for(long long j = i * i; j <= v; j+= i) {
      arr[j] = 1;
    }
  }
  return arr;
}
  
int main() {
  auto sieve_array = sieve<12345>();
  std::cout << 7 << " : " << sieve_array[7] << std::endl;
  std::cout << 2000 << " : " << sieve_array[2000]<< std::endl;
  std::cout << 2003 << " : " << sieve_array[2003]<< std::endl;
  
  size_t i = 0;
  std::cin >> i;
  std::cout << sieve_array[i] << std::endl;
  
  return 0;
}
```



## 视频

- [C++ Weekly - Ep 273 - C++23's Lambda Simplification (With Commodore 64 Example)](https://www.youtube.com/watch?v=fPWWo0MVK34) 讨论mutable场景下的lambda的()不能省掉。c++23有提案修订。

`TODO fix link then remove this line`



## 项目

- https://github.com/Tencent/flare 腾讯出品的一个业务库，嵌入了各种常用客户端/rpc等等

---

看到这里或许你有建议或者疑问或者指出错误，请留言评论! 多谢!  你的评论非常重要！也可以帮忙点赞分享转发！多谢支持！

[本文永久链接](https://wanghenshui.github.io/cppweeklynews/posts/015.html)
